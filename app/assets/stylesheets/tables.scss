/*
 * Tables.scss
 * Tables for, you guessed it, tabular data
 * ---------------------------------------- */
@import "variables.scss";
@import "mixins.scss";

// BASELINE STYLES
// ---------------

table {
  width: 100%;
  margin-bottom: $baseline;
  padding: 0;
  font-size: $basefont;
  border-collapse: collapse;
  //box-shadow: 1px 1px 1px 1px rgba(3, 3, 3, 0.5);
  th,
  td {
    padding: 10px 10px 9px;
    line-height: $baseline;
    text-align: left;
  }
  th {
    padding-top: 9px;
    font-weight: bold;
    vertical-align: middle;
  }
  td {
    vertical-align: middle;
    border-top: 1px solid #ddd;
  }
  // When scoped to row, fix th in tbody
  tbody th {
    border-top: 1px solid #ddd;
    vertical-align: top;
  }
}

// CONDENSED VERSION
// -----------------
.condensed-table {
  th,
  td {
    padding: 5px 5px 4px;
  }
}



// BORDERED VERSION
// ----------------

.bordered-table {
  border: 1px solid #ddd;
  border-collapse: separate; // Done so we can round those corners!
  *border-collapse: collapse; /* IE7, collapse table to remove spacing */
  border-radius: 4px 4px 0 0;
  th + th,
  td + td,
  th + td {
    border-left: 1px solid #ddd;
  }
  thead tr:first-child th:first-child,
  tbody tr:first-child td:first-child {
    @include border-radius(4px 0 0 0);
  }
  thead tr:first-child th:last-child,
  tbody tr:first-child td:last-child {
    @include border-radius(0 4px 0 0);
  }
  tbody tr:last-child td:first-child {
    @include border-radius(0 0 0 4px);
  }
  tbody tr:last-child td:last-child {
    @include border-radius(0 0 4px 0);
  }
}


// TABLE CELL SIZES
// ----------------

// This is a duplication of the main grid .columns() mixin, but subtracts 20px to account for input padding and border
@mixin tableColumns($columnSpan: 1) {
  width: (($gridColumnWidth - 20) * $columnSpan) + (($gridColumnWidth - 20) * ($columnSpan - 1));
}
table {
  // Default columns
  .span1     { @include tableColumns(1); }
  .span2     { @include tableColumns(2); }
  .span3     { @include tableColumns(3); }
  .span4     { @include tableColumns(4); }
  .span5     { @include tableColumns(5); }
  .span6     { @include tableColumns(6); }
  .span7     { @include tableColumns(7); }
  .span8     { @include tableColumns(8); }
  .span9     { @include tableColumns(9); }
  .span10    { @include tableColumns(10); }
  .span11    { @include tableColumns(11); }
  .span12    { @include tableColumns(12); }
  .span13    { @include tableColumns(13); }
  .span14    { @include tableColumns(14); }
  .span15    { @include tableColumns(15); }
  .span16    { @include tableColumns(16); }
}


// ZEBRA-STRIPING
// --------------

// Default zebra-stripe styles (alternating gray and transparent backgrounds)
.zebra-striped {
  tbody {
    tr:nth-child(odd) td,
    tr:nth-child(odd) th {
      background-color: #f9f9f9;
    }
    tr:hover td,
    tr:hover th{
      background-color: #f5f5f5;
    }
  }
}

table {
  // Tablesorting styles w/ jQuery plugin
  .header {
    cursor: pointer;
    &:after {
      content: "";
      float: right;
      margin-top: 7px;
      border-width: 0 4px 4px;
      border-style: solid;
      border-color: #000 transparent;
      visibility: hidden;
    }
  }
  // Style the sorted column headers (THs)
  .headerSortUp,
  .headerSortDown {
    background-color: rgba(141,192,219,.25);
    text-shadow: 0 1px 1px rgba(255,255,255,.75);
  }
  // Style the ascending (reverse alphabetical) column header
  .header:hover {
    &:after {
      visibility:visible;
    }
  }
  // Style the descending (alphabetical) column header
  .headerSortDown,
  .headerSortDown:hover {
    &:after {
      visibility:visible;
      @include opacity(60);
    }
  }
  // Style the ascending (reverse alphabetical) column header
  .headerSortUp {
    &:after {
      border-bottom: none;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 4px solid #000;
      visibility:visible;
      @include box-shadow(none); //can't add boxshadow to downward facing arrow :(
      @include opacity(60);
    }
  }
  // Blue Table Headings
  .blue {
    color: $blue;
    border-bottom-color: $blue;
  }
  .headerSortUp.blue,
  .headerSortDown.blue {
    background-color: lighten($blue, 40%);
  }
  // Green Table Headings
  .green {
    color: $green;
    border-bottom-color: $green;
  }
  .headerSortUp.green,
  .headerSortDown.green {
    background-color: lighten($green, 40%);
  }
  // Red Table Headings
  .red {
    color: $red;
    border-bottom-color: $red;
  }
  .headerSortUp.red,
  .headerSortDown.red {
    background-color: lighten($red, 50%);
  }
  // Yellow Table Headings
  .yellow {
    color: $yellow;
    border-bottom-color: $yellow;
  }
  .headerSortUp.yellow,
  .headerSortDown.yellow {
    background-color: lighten($yellow, 40%);
  }
  // Orange Table Headings
  .orange {
    color: $orange;
    border-bottom-color: $orange;
  }
  .headerSortUp.orange,
  .headerSortDown.orange {
    background-color: lighten($orange, 40%);
  }
  // Purple Table Headings
  .purple {
    color: $purple;
    border-bottom-color: $purple;
  }
  .headerSortUp.purple,
  .headerSortDown.purple {
    background-color: lighten($purple, 40%);
  }
}

// MODALS
// ------

.modal-backdrop {
  background-color: $black;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 10000;
  // Fade for backdrop
  &.fade { opacity: 0; }
}

.modal-backdrop,
.modal-backdrop.fade.in {
  @include opacity(80);
}

.modal {
  position: fixed;
  top: 50%;
  left: 50%;
  z-index: 11000;
  width: 560px;
  margin: -250px 0 0 -280px;
  background-color: $white;
  border: 1px solid #999;
  border: 1px solid rgba(0,0,0,.3);
  *border: 1px solid #999; /* IE6-7 */
  @include border-radius(6px);
  @include box-shadow(0 3px 7px rgba(0,0,0,0.3));
  @include background-clip(padding-box);
  .closed { margin-top: 7px;float:right;font-size:1.3em;font-weight:bold;}
  &.fade {
    @include transition("opacity .3s linear, top .3s ease-out");
    top: -25%;
  }
  &.fade.in{ top: 50%; }
}
.modal-header {
  border-bottom: 1px solid #ccc;
  padding: 5px 15px;
}
.modal-body {
    padding: 15px;
}
.modal-body form {
  margin-bottom: 0;
}
.modal-footer {
  background-color: #f5f5f5;
  padding: 14px 15px 15px;
  border-top: 1px solid #ddd;
  @include border-radius(0 0 6px 6px);
  @include box-shadow(inset 0 1px 0 $white);
  @include clearfix();
  margin-bottom: 0;
  .btn {
    float: right;
    margin-left: 5px;
  }
}

// Fix the stacking of these components when in modals
.modal .popover,
.modal .twipsy {
  z-index: 12000;
}


// POPOVER ARROWS
// --------------


@mixin popover-arrow-above($arrowWidth: 5px) {
  bottom: 0;
  left: 50%;
  margin-left: -$arrowWidth;
  border-left: $arrowWidth solid transparent;
  border-right: $arrowWidth solid transparent;
  border-top: $arrowWidth solid $black;
}
@mixin popover-arrow-left($arrowWidth: 5px) {
  top: 50%;
  right: 0;
  margin-top: -$arrowWidth;
  border-top: $arrowWidth solid transparent;
  border-bottom: $arrowWidth solid transparent;
  border-left: $arrowWidth solid $black;
}
@mixin popover-arrow-below($arrowWidth: 5px) {
  top: 0;
  left: 50%;
  margin-left: -$arrowWidth;
  border-left: $arrowWidth solid transparent;
  border-right: $arrowWidth solid transparent;
  border-bottom: $arrowWidth solid $black;
}
@mixin popover-arrow-right($arrowWidth: 5px) {
  top: 50%;
  left: 0;
  margin-top: -$arrowWidth;
  border-top: $arrowWidth solid transparent;
  border-bottom: $arrowWidth solid transparent;
  border-right: $arrowWidth solid $black;
}


// TWIPSY
// ------

.twipsy {
  display: block;
  position: absolute;
  visibility: visible;
  padding: 5px;
  font-size: 11px;
  z-index: 1000;
  @include opacity(80);
  &.fade.in {
    @include opacity(80);
  }
  &.above .twipsy-arrow   { @include popover-arrow-above(); }
  &.left .twipsy-arrow    { @include popover-arrow-left(); }
  &.below .twipsy-arrow   { @include popover-arrow-below(); }
  &.right .twipsy-arrow   { @include popover-arrow-right(); }
}
.twipsy-inner {
  padding: 3px 8px;
  background-color: $black;
  color: white;
  text-align: center;
  max-width: 200px;
  text-decoration: none;
  @include border-radius(4px);
}
.twipsy-arrow {
  position: absolute;
  width: 0;
  height: 0;
}


// POPOVERS
// --------

.popover {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1000;
  padding: 5px;
  display: none;
  &.above .arrow { @include popover-arrow-above(); }
  &.right .arrow { @include popover-arrow-right(); }
  &.below .arrow { @include popover-arrow-below(); }
  &.left .arrow  { @include popover-arrow-left(); }
  .arrow {
    position: absolute;
    width: 0;
    height: 0;
  }
  .inner {
    background: $black;
    background: rgba(0,0,0,.8);
    padding: 3px;
    overflow: hidden;
    width: 280px;
    @include border-radius(6px);
    @include box-shadow(0 3px 7px rgba(0,0,0,0.3));
  }
  .title {
    background-color: #f5f5f5;
    padding: 9px 15px;
    line-height: 1;
    @include border-radius(3px 3px 0 0);
    border-bottom:1px solid #eee;
  }
  .content {
    background-color: $white;
    padding: 14px;
    @include border-radius(0 0 3px 3px);
    @include background-clip(padding-box);
    p, ul, ol {
      margin-bottom: 0;
    }
  }
}
